<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>åˆ›å®¢è´´æ¯äº²èŠ‚</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" type="text/css" href="./css/share.css">
  <link rel="stylesheet" type="text/css" href="./css/reset.css">
</head>
<body>
<video
        id="myvideo"
        src="https://pub.cdn.oss.chuangkit.com/video/mothers_day_960_540.mp4"
        controls="controls"
        autoplay="autoplay"
        width="100%"
>
  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾ã€‚
</video>
<section class="first-section"></section>
<!--<section class="second-section"></section>-->
<!--<div class="download-button">ä¸‹è½½Appåˆ¶ä½œ</div>-->
<div class="buttons">
  <div class="gift-button">ä¸€ä»½ç”¨å¿ƒçš„ç¤¼ç‰©</div>
  <div id="share-button">åˆ†äº«ç»™æœ‹å‹</div>
</div>

<a href="/mobileindex"><div class="footer-left"></div></a>
<!--<div class="footer-right">æˆ–åœ¨ç™¾åº¦æœç´¢â€œåˆ›å®¢è´´â€è®¾è®¡åˆ¶ä½œ</div>-->
<div class="modal">
  <div class="share-tip-container">
    <span class="pointer-icon">ğŸ‘†</span>
    <p class="share-tip">ç‚¹å‡»è¿™é‡Œåˆ†äº«</p>
  </div>
</div>
<!--å¼•å…¥jQuery-->
<script src="./libs/jquery-1.12.4.min.js"></script>
<script>
  $(document).ready(function(){
    // ç»‘å®šé¡µé¢çš„resizeäº‹ä»¶ä»¥åœ¨å˜åŒ–æ—¶æ›´æ–°htmlçš„font-size
    $(window).resize(setFontSize);
  });
  // è®¾ç½®htmlçš„font-size
  function setFontSize() {
    document.getElementsByTagName('html')[0].style.fontSize = (window.innerWidth / 375) * 100 + 'px';
  }
  document.addEventListener('touchstart',touch, false);
  document.addEventListener('touchmove',touch, false);
  document.addEventListener('touchend',touch, false);

  function touch (event){
    var event = event || window.event;

    switch(event.type){
      case "touchstart":
        window.touchX =  event.touches[0].clientX;
        break;
      case "touchend":
        if((event.changedTouches[0].clientX - window.touchX) > 30) {
          window.location.href = 'question.html';
          console.log('åé€€');
        }
        break;
    }
  }
$("#share-button").click(function () {
  $(".modal").css("display","block");
});
  $(".modal").click(function () {
    $(".modal").css("display","none");
  });
  $(".gift-button").click(function () {
    $("#myvideo").css("display","block");
  });
  $("#myvideo").click(function () {
    $("#myvideo").css("display","none");
  });
</script>
<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
  var wxConfig = {
    debug: false, // å¼€å¯è°ƒè¯•æ¨¡å¼,è°ƒç”¨çš„æ‰€æœ‰apiçš„è¿”å›å€¼ä¼šåœ¨å®¢æˆ·ç«¯alertå‡ºæ¥ï¼Œè‹¥è¦æŸ¥çœ‹ä¼ å…¥çš„å‚æ•°ï¼Œå¯ä»¥åœ¨pcç«¯æ‰“å¼€ï¼Œå‚æ•°ä¿¡æ¯ä¼šé€šè¿‡logæ‰“å‡ºï¼Œä»…åœ¨pcç«¯æ—¶æ‰ä¼šæ‰“å°ã€‚
    appId: '', // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
    timestamp: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
    nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
    signature: '',// å¿…å¡«ï¼Œç­¾åï¼Œè§é™„å½•1
    jsApiList: [
      'checkJsApi',
      'onMenuShareTimeline',
      'onMenuShareAppMessage',
      'onMenuShareQQ',
      'onMenuShareWeibo',
      'onMenuShareQZone',
      'hideMenuItems',
      'showMenuItems',
      'hideAllNonBaseMenuItem',
      'showAllNonBaseMenuItem',
      'translateVoice',
      'startRecord',
      'stopRecord',
      'onVoiceRecordEnd',
      'playVoice',
      'onVoicePlayEnd',
      'pauseVoice',
      'stopVoice',
      'uploadVoice',
      'downloadVoice',
      'chooseImage',
      'previewImage',
      'uploadImage',
      'downloadImage',
      'getNetworkType',
      'openLocation',
      'getLocation',
      'hideOptionMenu',
      'showOptionMenu',
      'closeWindow',
      'scanQRCode',
      'chooseWXPay',
      'openProductSpecificView',
      'addCard',
      'chooseCard',
      'openCard'
    ] // å¿…å¡«ï¼Œéœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨ï¼Œæ‰€æœ‰JSæ¥å£åˆ—è¡¨è§é™„å½•2
  };
  $.ajax({
    url: "/login/getWxDyhJsApiConfig.do",
    dataType: "json",
    type: "GET",
    success: function(data) {
      console.log(data);
      wxConfig.appId = data.appId;
      wxConfig.timestamp = data.timestamp;
      wxConfig.nonceStr = data.nonceStr;
      wxConfig.signature = data.signature;
      console.log(wxConfig);
    },
    error: function() {
      console.log("è¯·æ±‚configå¤±è´¥");
    }
  });
  wx.config(wxConfig);
  wx.ready(function(){
    // configä¿¡æ¯éªŒè¯åä¼šæ‰§è¡Œreadyæ–¹æ³•ï¼Œæ‰€æœ‰æ¥å£è°ƒç”¨éƒ½å¿…é¡»åœ¨configæ¥å£è·å¾—ç»“æœä¹‹åï¼Œ
    // configæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯çš„å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥å¦‚æœéœ€è¦åœ¨é¡µé¢åŠ è½½æ—¶å°±è°ƒç”¨ç›¸å…³æ¥å£ï¼Œåˆ™é¡»æŠŠç›¸å…³æ¥å£æ”¾åœ¨readyå‡½æ•°ä¸­è°ƒç”¨æ¥ç¡®ä¿æ­£ç¡®æ‰§è¡Œã€‚
    // å¯¹äºç”¨æˆ·è§¦å‘æ—¶æ‰è°ƒç”¨çš„æ¥å£ï¼Œåˆ™å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦æ”¾åœ¨readyå‡½æ•°ä¸­ã€‚
    wx.checkJsApi({
      jsApiList: ['onMenuShareAppMessage','onMenuShareTimeline'], // éœ€è¦æ£€æµ‹çš„JSæ¥å£åˆ—è¡¨ï¼Œæ‰€æœ‰JSæ¥å£åˆ—è¡¨è§é™„å½•2,
      success: function(res) {
        console.log(JSON.stringify(res));
        // ä»¥é”®å€¼å¯¹çš„å½¢å¼è¿”å›ï¼Œå¯ç”¨çš„apiå€¼trueï¼Œä¸å¯ç”¨ä¸ºfalse
        // å¦‚ï¼š{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}
      }
    });
    // 2.2 ç›‘å¬â€œåˆ†äº«åˆ°æœ‹å‹åœˆâ€æŒ‰é’®ç‚¹å‡»ã€è‡ªå®šä¹‰åˆ†äº«å†…å®¹åŠåˆ†äº«ç»“æœæ¥å£
    document.querySelector('#share-button').onclick = function () {
      wx.onMenuShareAppMessage({
        title: 'äº’è”ç½‘ä¹‹å­',
        desc: 'åœ¨é•¿å¤§çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ‰æ…¢æ…¢å‘ç°ï¼Œæˆ‘èº«è¾¹çš„æ‰€æœ‰äº‹ï¼Œåˆ«äººè·Ÿæˆ‘è¯´çš„æ‰€æœ‰äº‹ï¼Œé‚£äº›æ‰€è°“æœ¬æ¥å¦‚æ­¤ï¼Œæ³¨å®šå¦‚æ­¤çš„äº‹ï¼Œå®ƒä»¬å…¶å®æ²¡æœ‰éå¾—å¦‚æ­¤ï¼Œäº‹æƒ…æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæœ‰äº›äº‹æ—¢ç„¶é”™äº†ï¼Œé‚£å°±è¯¥åšå‡ºæ”¹å˜ã€‚',
        link: 'http://movie.douban.com/subject/25785114/',
        imgUrl: 'http://demo.open.weixin.qq.com/jssdk/images/p2166127561.jpg',
        trigger: function (res) {
          // ä¸è¦å°è¯•åœ¨triggerä¸­ä½¿ç”¨ajaxå¼‚æ­¥è¯·æ±‚ä¿®æ”¹æœ¬æ¬¡åˆ†äº«çš„å†…å®¹ï¼Œå› ä¸ºå®¢æˆ·ç«¯åˆ†äº«æ“ä½œæ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼Œè¿™æ—¶å€™ä½¿ç”¨ajaxçš„å›åŒ…ä¼šè¿˜æ²¡æœ‰è¿”å›
          alert('ç”¨æˆ·ç‚¹å‡»å‘é€ç»™æœ‹å‹');
        },
        success: function (res) {
          alert('å·²åˆ†äº«');
        },
        cancel: function (res) {
          alert('å·²å–æ¶ˆ');
        },
        fail: function (res) {
          alert(JSON.stringify(res));
        }
      });
      alert('å·²æ³¨å†Œè·å–â€œå‘é€ç»™æœ‹å‹â€çŠ¶æ€äº‹ä»¶');
    };

    // 2.2 ç›‘å¬â€œåˆ†äº«åˆ°æœ‹å‹åœˆâ€æŒ‰é’®ç‚¹å‡»ã€è‡ªå®šä¹‰åˆ†äº«å†…å®¹åŠåˆ†äº«ç»“æœæ¥å£
    document.querySelector('#share-button').onclick = function () {
      wx.onMenuShareTimeline({
        title: 'äº’è”ç½‘ä¹‹å­',
        link: 'http://movie.douban.com/subject/25785114/',
        imgUrl: 'http://demo.open.weixin.qq.com/jssdk/images/p2166127561.jpg',
        trigger: function (res) {
          // ä¸è¦å°è¯•åœ¨triggerä¸­ä½¿ç”¨ajaxå¼‚æ­¥è¯·æ±‚ä¿®æ”¹æœ¬æ¬¡åˆ†äº«çš„å†…å®¹ï¼Œå› ä¸ºå®¢æˆ·ç«¯åˆ†äº«æ“ä½œæ˜¯ä¸€ä¸ªåŒæ­¥æ“ä½œï¼Œè¿™æ—¶å€™ä½¿ç”¨ajaxçš„å›åŒ…ä¼šè¿˜æ²¡æœ‰è¿”å›
          alert('ç”¨æˆ·ç‚¹å‡»åˆ†äº«åˆ°æœ‹å‹åœˆ');
        },
        success: function (res) {
          alert('å·²åˆ†äº«');
        },
        cancel: function (res) {
          alert('å·²å–æ¶ˆ');
        },
        fail: function (res) {
          alert(JSON.stringify(res));
        }
      });
      alert('å·²æ³¨å†Œè·å–â€œåˆ†äº«åˆ°æœ‹å‹åœˆâ€çŠ¶æ€äº‹ä»¶');
    };
  });
  wx.error(function (res) {
    alert(res.errMsg);
  });
</script>
</body>
</html>